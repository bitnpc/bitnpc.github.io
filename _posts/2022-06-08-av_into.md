---
layout: post
title: "音视频及其数字化表示"
date: 2022-03-14
categories: [技术, 音视频]
tags:
    - P2P
    - 音视频
---

声音和图像是两种不同的感知形式，它们的本质基于物理学的原理和感知机制。

### 声音和图像的本质
声音是由物体振动产生的机械波。当物体振动时，周围的空气分子也会振动，形成压缩和膨胀的波动。这种机械波通过空气传播，被耳朵中的鼓膜接收，然后通过听觉系统转化为我们能够感知的声音。

声音的特征由两个主要参数决定：**频率**和**振幅**。频率决定了声音的音调，而振幅则决定了声音的音量。

图像是通过光传递的信息。光是一种电磁波，当它照射到物体表面并反射进入眼睛或摄像机时，我们就能够感知到图像。

图像的特征由**颜色**和**亮度**决定。颜色是由光的频率决定的，而亮度是光的强度。在图像中，颜色和亮度分布形成了我们看到的场景。

通过对声音和图像进行数字化处理，可以将连续的模拟信号转换为离散的数字形式，以便更容易地存储、传输、处理和分析。

数字化的声音和图像，称为音频和视频，合称**音视频**。

音视频的原始数据是通过摄像机来采集的，音频通过麦克风收集，视频通过 `CMOS` 采集，数字化之后存储到磁盘里。

### 音频的数字化

1. 采样。连续的模拟音频信号被以固定的时间间隔进行采样，得到一系列离散的采样值。采样的频率决定了每秒采样的次数，通常以赫兹（Hz）为单位。音频的常见采样率是 44.1kHz

2. 量化，即用数字来表示音频幅度。量化深度，也称为采样精度，是模拟信号转换为二进制数字信号的位数。量化深度越高，采样的数字信号精度越高。比如，量化深度为 16 bit，采样的数字信号幅度就有 `2^16 = 65536` 个档位。音频量化深度一般有 8 bit、16 bit、20bit、24bit 和 32bit 等。

3. 编码，即将量化后的数字转为二进制。常见的编码格式有 `AAC`，`mp3`，`G711`, `opus`。其中，`opus` 免费开源，且编码效果好，底噪低，逐渐为流媒体所采用。

![audio_sample](/assets/img/post/post-2022-06-08/audio_sample.png){: width="972" height="589" .w-100 .normal}

上图中，横坐标代表时间，1 秒钟内竖线的条数对应采样率，竖线的高度对应信号幅度，信号幅度的最小单位的倒数则是量化深度。

#### 音频数字化的三要素

|采样频率（sample rate）|量化位数（bit depth）|声道数（Number of Channels）|
|-------------------|--------------------|---------------------------|
|每秒种抽取声音幅度样本的次数|每个采样点用多少二进制位表示数据范围|声音通道的个数|
|采样率越高，声音质量越高，数据量越大|量化位数越多，音质越好，数据量越大|立体声比单声道表现力更丰富，但数据量翻倍|
|常用的采样率：<br> * 8,000 Hz - 电话所用采样率 <br> * 11,025 Hz - AM调幅广播所用采样率 <br> * 22,050 Hz - 无线电广播所用采样率 <br> * 32,000 Hz - miniDV 所用采样率 <br> * 44,100 Hz - 音频 CD 所用采样率| * 8 bit，将幅度划分为 2^8 个等级 <br> * 16 bit，共 65536 个量级，达到CD标准 <br> * 32 bit，共 4294967296 个量级 | * 单声道并非意味着只有一个喇叭发声，通常会处理成两个喇叭输出同一个声道的声音 <br> * 立体声两个喇叭都发声（通常左右声道有分工），更能感受到空间效果。<br> * 除了单双声道外，还有其他的更多声道，例如 5.1 、7.1 等等 |

### 视频的数字化

1. 采样（Sampling）: 视频信号是由连续的模拟图像构成的。在采样阶段，图像被以固定间隔的方式采样，将连续图像转换为离散像素点。1 秒中内采样的个数对应视频的帧率

2. 量化（Quantization）: 对于每个像素，图像的亮度和颜色被量化为数字值。这通常分为亮度量化和色度量化

3. 色彩空间转换（Optional）: 在某些情况下，视频信号可能需要在不同的色彩空间之间转换，例如从 `RGB（Red, Green, Blue）` 到 `YUV（Luma, Chroma）`。这通常是为了更有效地表示和传输图像信息。因为 `RGB` 色彩空间包含了很多人眼无法分辨的色值，且人眼对亮度（明亮度）的敏感性要远远高于对颜色（色度）的敏感性。`Y（Luma）`表示亮度，`U` 和 `V（Chroma）`表示颜色。通过将颜色信息分离到 `U` 和 `V` 分量，可以更有效地压缩颜色信息，使其更适合存储和传输

4. 编码（Encoding）: 最后，编码阶段将量化后的数字值和可能的色彩空间信息以数字信号的形式编码，例如通过使用视频编解码器。常见的编码格式包括 `AVC(H.264)`,`HEVC(H.265)`,`VP9`,`AV1`

![h264_codec](/assets/img/post/post-2022-06-08/h264_codec.png){: width="972" height="589" .w-100 .normal}

上图是 H.264 编码的示意图，每幅图像被分割成 8*8 像素尺寸来编码。



参考资料
- https://www.volcengine.com/docs/6489/72015
- ChatGPT